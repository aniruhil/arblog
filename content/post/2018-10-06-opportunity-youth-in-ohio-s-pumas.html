---
title: Opportunity Youth in Ohio's PUMAs
author: Ani Ruhil
date: '2018-10-06'
slug: opportunity-youth-in-ohio-s-pumas
categories:
  - R
tags:
  - Ohio
  - lodown
  - ACS
header:
  caption: 'Experiments with lowdown and ACS PUMS data'
  image: ''
---



<p>A client needed state-level estimates of the percent of opportunity youth (defined either as 16-19 or 16-24 year-old persons who are neither in school nor employed) in each state plus Washington DC. The end result would be three years of estimates that matched the numbers put out by <a href="http://www.measureofamerica.org/disconnected-youth/">Measure of America’s yearly reports on the subject.</a></p>
<p>I had used <a href="http://ajdamico.com/">Anthony Damico’s</a> fantastic repository <a href="http://asdfree.com">Analyze Survey Data for Free</a> for BRFSS, DHS, and other data but never with PUMS data. This was a golden chance to remedy that limitation, and in this short post I am documenting my experience.</p>
<p>Getting the data is easy enough with the <code>lodown</code> package, but bear in mind that you need some computing horsepower and a fast internet connection. For example, even with half a terabyte of free disk space on a flash drive, a Macbook Pro (2016) running Sierra with 16GB of RAM and 2.9 GHz Intel core i7 I had many failed attempts at downloading all fifty states, DC, and Puerto Rico. In brief, the 2016 American Community Survey 1-year files would download for each geography but then the individual data-sets would not merge because the vector memory was being exhausted (RStudio 3.5+ has a new system of vector memory allocation “to avoid having the R process killed when macOS over-commits memory.”). My solution was to work outside of RStudio with each yearly data download split into two calls, one for each of 26 geographies. The basic code follows, starting with constructing a folder caled <code>ACS</code> to store the data.</p>
<p>and then generating the catalogs of interest.</p>
<p>Now we can download the microdata to the ACS folder.</p>
<p>Your should end up with a file called <code>acs2016_1yr.rds</code> in the ACS folder. This is just the first batch of geographies so we’ll repeat this step again for the second batch. But before we do that, let us generate a few indicators we need, filter the data-frame to just the 16-24 year-olds, and save this file with a unique name.</p>
<p>We can then rinse and repeat for the second batch of geographies, as shown below.</p>
<p>Now we combine the geographies into a single data-frame.</p>
<p>I cleared my RStudio Environment before loading the full 2016 data-frame, just to avoid any vector memory errors.</p>
<p>Now all that remained to be done was to specify the survey design and then run the weighted estimates I needed.</p>
<p>I borrowed Anthony’s default code to label the states.</p>
<p>Now the target measure of opportunity youth.</p>
<p>If all went well you should see <code>oppyouth</code> reflecting the following for 2016.</p>
<table>
<caption><span id="tab:unnamed-chunk-12">Table 1: </span>Percent Disengaged Youth (16-24 year-olds) by State</caption>
<thead>
<tr class="header">
<th align="left">state</th>
<th align="left">disengaged</th>
<th align="left">notdisengaged</th>
<th align="left">stderror</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alabama</td>
<td align="left">14.1</td>
<td align="left">85.9</td>
<td align="left">0.5</td>
</tr>
<tr class="even">
<td align="left">Alaska</td>
<td align="left">17.9</td>
<td align="left">82.1</td>
<td align="left">1.9</td>
</tr>
<tr class="odd">
<td align="left">Arizona</td>
<td align="left">13.7</td>
<td align="left">86.3</td>
<td align="left">0.5</td>
</tr>
<tr class="even">
<td align="left">Arkansas</td>
<td align="left">15.0</td>
<td align="left">85.0</td>
<td align="left">0.7</td>
</tr>
<tr class="odd">
<td align="left">California</td>
<td align="left">11.5</td>
<td align="left">88.5</td>
<td align="left">0.2</td>
</tr>
<tr class="even">
<td align="left">Colorado</td>
<td align="left">10.7</td>
<td align="left">89.3</td>
<td align="left">0.5</td>
</tr>
<tr class="odd">
<td align="left">Connecticut</td>
<td align="left">8.5</td>
<td align="left">91.5</td>
<td align="left">0.5</td>
</tr>
<tr class="even">
<td align="left">Delaware</td>
<td align="left">14.3</td>
<td align="left">85.7</td>
<td align="left">1.5</td>
</tr>
<tr class="odd">
<td align="left">District of Columbia</td>
<td align="left">14.8</td>
<td align="left">85.2</td>
<td align="left">1.6</td>
</tr>
<tr class="even">
<td align="left">Florida</td>
<td align="left">11.8</td>
<td align="left">88.2</td>
<td align="left">0.3</td>
</tr>
<tr class="odd">
<td align="left">Georgia</td>
<td align="left">12.6</td>
<td align="left">87.4</td>
<td align="left">0.4</td>
</tr>
<tr class="even">
<td align="left">Hawaii</td>
<td align="left">11.1</td>
<td align="left">88.9</td>
<td align="left">1.1</td>
</tr>
<tr class="odd">
<td align="left">Idaho</td>
<td align="left">10.9</td>
<td align="left">89.1</td>
<td align="left">1.1</td>
</tr>
<tr class="even">
<td align="left">Illinois</td>
<td align="left">10.7</td>
<td align="left">89.3</td>
<td align="left">0.3</td>
</tr>
<tr class="odd">
<td align="left">Indiana</td>
<td align="left">10.7</td>
<td align="left">89.3</td>
<td align="left">0.4</td>
</tr>
<tr class="even">
<td align="left">Iowa</td>
<td align="left">7.4</td>
<td align="left">92.6</td>
<td align="left">0.5</td>
</tr>
<tr class="odd">
<td align="left">Kansas</td>
<td align="left">10.0</td>
<td align="left">90.0</td>
<td align="left">0.6</td>
</tr>
<tr class="even">
<td align="left">Kentucky</td>
<td align="left">14.3</td>
<td align="left">85.7</td>
<td align="left">0.8</td>
</tr>
<tr class="odd">
<td align="left">Louisiana</td>
<td align="left">17.4</td>
<td align="left">82.6</td>
<td align="left">0.8</td>
</tr>
<tr class="even">
<td align="left">Maine</td>
<td align="left">11.9</td>
<td align="left">88.1</td>
<td align="left">1.2</td>
</tr>
<tr class="odd">
<td align="left">Maryland</td>
<td align="left">11.1</td>
<td align="left">88.9</td>
<td align="left">0.5</td>
</tr>
<tr class="even">
<td align="left">Massachusetts</td>
<td align="left">7.4</td>
<td align="left">92.6</td>
<td align="left">0.4</td>
</tr>
<tr class="odd">
<td align="left">Michigan</td>
<td align="left">11.6</td>
<td align="left">88.4</td>
<td align="left">0.5</td>
</tr>
<tr class="even">
<td align="left">Minnesota</td>
<td align="left">7.5</td>
<td align="left">92.5</td>
<td align="left">0.5</td>
</tr>
<tr class="odd">
<td align="left">Mississippi</td>
<td align="left">14.5</td>
<td align="left">85.5</td>
<td align="left">0.9</td>
</tr>
<tr class="even">
<td align="left">Missouri</td>
<td align="left">10.1</td>
<td align="left">89.9</td>
<td align="left">0.6</td>
</tr>
<tr class="odd">
<td align="left">Montana</td>
<td align="left">11.8</td>
<td align="left">88.2</td>
<td align="left">1.3</td>
</tr>
<tr class="even">
<td align="left">Nebraska</td>
<td align="left">9.2</td>
<td align="left">90.8</td>
<td align="left">0.8</td>
</tr>
<tr class="odd">
<td align="left">Nevada</td>
<td align="left">14.3</td>
<td align="left">85.7</td>
<td align="left">0.8</td>
</tr>
<tr class="even">
<td align="left">New Hampshire</td>
<td align="left">8.5</td>
<td align="left">91.5</td>
<td align="left">0.8</td>
</tr>
<tr class="odd">
<td align="left">New Jersey</td>
<td align="left">10.1</td>
<td align="left">89.9</td>
<td align="left">0.4</td>
</tr>
<tr class="even">
<td align="left">New Mexico</td>
<td align="left">16.4</td>
<td align="left">83.6</td>
<td align="left">1.3</td>
</tr>
<tr class="odd">
<td align="left">New York</td>
<td align="left">12.1</td>
<td align="left">87.9</td>
<td align="left">0.3</td>
</tr>
<tr class="even">
<td align="left">North Carolina</td>
<td align="left">11.6</td>
<td align="left">88.4</td>
<td align="left">0.4</td>
</tr>
<tr class="odd">
<td align="left">North Dakota</td>
<td align="left">7.0</td>
<td align="left">93.0</td>
<td align="left">1.0</td>
</tr>
<tr class="even">
<td align="left">Ohio</td>
<td align="left">11.1</td>
<td align="left">88.9</td>
<td align="left">0.4</td>
</tr>
<tr class="odd">
<td align="left">Oklahoma</td>
<td align="left">14.2</td>
<td align="left">85.8</td>
<td align="left">0.7</td>
</tr>
<tr class="even">
<td align="left">Oregon</td>
<td align="left">11.9</td>
<td align="left">88.1</td>
<td align="left">0.7</td>
</tr>
<tr class="odd">
<td align="left">Pennsylvania</td>
<td align="left">10.7</td>
<td align="left">89.3</td>
<td align="left">0.4</td>
</tr>
<tr class="even">
<td align="left">Rhode Island</td>
<td align="left">7.5</td>
<td align="left">92.5</td>
<td align="left">0.8</td>
</tr>
<tr class="odd">
<td align="left">South Carolina</td>
<td align="left">12.7</td>
<td align="left">87.3</td>
<td align="left">0.5</td>
</tr>
<tr class="even">
<td align="left">South Dakota</td>
<td align="left">9.2</td>
<td align="left">90.8</td>
<td align="left">1.2</td>
</tr>
<tr class="odd">
<td align="left">Tennessee</td>
<td align="left">13.1</td>
<td align="left">86.9</td>
<td align="left">0.6</td>
</tr>
<tr class="even">
<td align="left">Texas</td>
<td align="left">13.4</td>
<td align="left">86.6</td>
<td align="left">0.3</td>
</tr>
<tr class="odd">
<td align="left">Utah</td>
<td align="left">9.2</td>
<td align="left">90.8</td>
<td align="left">0.6</td>
</tr>
<tr class="even">
<td align="left">Vermont</td>
<td align="left">11.6</td>
<td align="left">88.4</td>
<td align="left">2.3</td>
</tr>
<tr class="odd">
<td align="left">Virginia</td>
<td align="left">9.8</td>
<td align="left">90.2</td>
<td align="left">0.4</td>
</tr>
<tr class="even">
<td align="left">Washington</td>
<td align="left">12.3</td>
<td align="left">87.7</td>
<td align="left">0.4</td>
</tr>
<tr class="odd">
<td align="left">West Virginia</td>
<td align="left">17.3</td>
<td align="left">82.7</td>
<td align="left">1.0</td>
</tr>
<tr class="even">
<td align="left">Wisconsin</td>
<td align="left">9.1</td>
<td align="left">90.9</td>
<td align="left">0.5</td>
</tr>
<tr class="odd">
<td align="left">Wyoming</td>
<td align="left">10.3</td>
<td align="left">89.7</td>
<td align="left">1.5</td>
</tr>
<tr class="even">
<td align="left">Puerto Rico</td>
<td align="left">21.6</td>
<td align="left">78.4</td>
<td align="left">0.7</td>
</tr>
</tbody>
</table>
<p>If you want the breakouts by race, you will need to cross Hispanic status and the one race alone categories.</p>
